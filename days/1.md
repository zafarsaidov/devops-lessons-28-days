[Main](../README.md)
---

## **Lesson Plan: Introduction to Linux Essentials**

### **1. Introduction to Linux & Essential Commands**

**Useful Information:**
*   Linux is an open-source operating system kernel. We typically use distributions (Distros) like Ubuntu, CentOS, etc., which bundle the kernel with software.
*   The shell (e.g., `bash`) is a command-line interpreter that takes your commands and tells the OS what to do.
*   **`man <command>`** is your best friend. It shows the manual for any command.

**Essential Commands & Practice:**
Log in as your user (e.g., `ssh student1@<vm_ip>`).

```bash
# See who you are and where you are
whoami                    # Output: student1
pwd                       # Output: /home/student1

# See what's in your home directory
ls                        # Lists files and directories
ls -l                     # Lists with details (permissions, owner, size)
ls -a                     # Lists ALL files, including hidden ones (starting with .)

# Create and remove files/directories
mkdir my_first_dir        # Creates a directory
cd my_first_dir           # Changes into that directory
touch file1.txt file2.txt # Creates two empty files
rm file2.txt              # Removes file2.txt
cd ..                     # Go back to the parent directory
rmdir my_first_dir        # Removes the EMPTY directory (will fail if not empty)

# Practice Task 1:
# 1. In your home directory, create a directory called `linux_practice`.
# 2. Inside it, create two files: `notes.txt` and `data.log`.
# 3. List the contents of `linux_practice` to confirm.
# 4. Remove the `data.log` file and then remove the `linux_practice` directory.
```

**Best Practices:**
* Use `rm -i` to be prompted before deletion (safer).
* Use `tab` for auto-completion of file and command names.
* Use `Ctrl + R` to search through your command history.

---

### **2. Navigating the Linux Filesystem**

**Useful Information:**
* The Linux filesystem is a hierarchical tree structure, starting from `/` (root).
* **Absolute Paths:** Start from root (e.g., `/home/student1/file`).
* **Relative Paths:** Start from your current directory (e.g., `./file` or `../sibling_dir/file`).
* **Special Paths:**
    * `.` (current directory)
    * `..` (parent directory)
    * `~` (your home directory)

**Practice:**
Navigate to the shared course directory.

```bash
# Let's go to the shared practice area
cd /opt/linux_course/practice_fs

# See the structure
pwd                       # Output: /opt/linux_course/practice_fs
ls -la

# Navigate using relative paths
cd projects/config
pwd                       # Output: /opt/linux_course/practice_fs/projects/config
cat app.conf              # View the contents of the file
cd ../../logs             # Go up two levels, then into 'logs'
pwd                       # Output: /opt/linux_course/practice_fs/logs

# Navigate using absolute paths
cd /opt/linux_course/practice_fs/docs
pwd

# Practice Task 2:
# 1. From your home directory, navigate to `/opt/linux_course/practice_fs/projects` using an absolute path.
# 2. Now, navigate to the `logs/archive` directory using a relative path.
# 3. Use `cat` to view the contents of `../system.log` (a relative path pointing to the parent's `system.log`).
# 4. Return to your home directory using the `~` shortcut.
```

**Use Cases:**
* Moving between project directories.
* Locating configuration files in `/etc`.
* Accessing log files in `/var/log`.

---

### **3. File Permissions and Ownership**

**Useful Information:**
* Every file/directory has an **owner** and a **group**.
* There are three types of permissions: **Read (r=4), Write (w=2), Execute (x=1)**.
* These permissions are set for three entities: **User (owner), Group, Others (o)**.
* Command `ls -l` shows this: `-rw-r--r-- 1 student1 student1 0 May 23 10:00 file.txt`
    * `-`: File type (`-` for file, `d` for directory).
    * `rw-`: User (owner) permissions.
    * `r--`: Group permissions.
    * `r--`: Others permissions.

**Commands & Practice:**
Navigate to `/opt/linux_course/practice_perms`.

```bash
ls -l

# Change ownership (requires sudo, only instructor/demo)
sudo chown student1 report.txt

# Change permissions using symbolic mode
chmod u+x script.sh        # Add execute (x) permission for the User (owner)
chmod go-w data.dat        # Remove write (w) permission for Group and Others
chmod a+r report.txt       # Add read (r) permission for All (user, group, others)

# Change permissions using numeric (octal) mode
chmod 755 script.sh        # rwx for owner, r-x for group and others (7=rwx, 5=r-x)
chmod 640 data.dat         # rw- for owner, r-- for group, --- for others

# Practice Task 3:
# 1. Check the permissions of all files in `/opt/linux_course/practice_perms`.
# 2. For `script.sh`, add read permission for the group.
# 3. For `data.dat`, set the permissions so that the owner can read and write, the group can read, and others have no access (use numeric mode).
# 4. Try to edit `report.txt` using `nano report.txt`. Can you? Why or why not?
```

**Best Practices:**
* Follow the **principle of least privilege**: Only give the permissions necessary for a task.
* Use `775` for directories you want others to browse.
* Use `644` for files you want others to read but not modify.

---

### **4. Text Editors, awk & sed**

**Useful Information:**
* **`nano`:** A simple, beginner-friendly text editor.
* **`vim`:** A powerful, modal editor. Steeper learning curve but very efficient.
* **`sed`:** A "stream editor" for filtering and transforming text.
* **`awk`:** A powerful programming language for pattern scanning and processing. Great for structured text.

**Practice:**
Navigate to `/opt/linux_course/practice_text`.

**A. Using `nano`:**
```bash
nano my_notes.txt
# Type a few lines of text.
# To save: Ctrl+O, then Enter.
# To exit: Ctrl+X.
```

**B. Using `sed` (Stream Editor):**
```bash
cat server_logs.txt
# Substitute "GET" with "REQUEST" globally on each line
sed 's/GET/REQUEST/g' server_logs.txt
# Delete lines containing "127.0.0.1"
sed '/127.0.0.1/d' server_logs.txt
# Edit the file in-place (creates a backup with .bak extension)
sed -i.bak 's/200/SUCCESS/g' server_logs.txt
```

**C. Using `awk` (Awesome Pattern Scanning):**
```bash
cat employees.csv
# Print the first column (default field separator is space/tab)
awk '{print $1}' employees.csv
# Print the first and third columns, using comma as a separator
awk -F ',' '{print $1, $3}' employees.csv
# Print only lines where the Department is "Engineering"
awk -F ',' '$2 == "Engineering" {print $0}' employees.csv
# Calculate the average salary (skip the header)
awk -F ',' 'NR>1 {sum+=$3; count++} END {print "Avg Salary:", sum/count}' employees.csv
```

**Practice Task 4:**
1.  Use `nano` to create a file `todo.list` in your home directory.
2.  Using `sed`, create a new file `no_local.log` from `server_logs.txt` that excludes the line with `127.0.0.1`.
3.  Using `awk`, extract only the `Name` and `Department` columns from `employees.csv` and save them to a new file `names_depts.txt`.
4.  Use `awk` to find the employee with the highest salary from `employees.csv`.

---

### **5. File Search & Text Filtering Tools**

**Useful Information:**
* **`grep`:** Searches for lines containing a pattern.
* **`find`:** Searches for files and directories in a directory hierarchy.

**Practice:**
Navigate to `/opt/linux_course`.

**A. Using `grep`:**
```bash
# Search for the word "Error" in a file
grep "Error" practice_fs/logs/system.log
# Search recursively in all files under a directory
grep -r "secret" practice_fs/
# Case-insensitive search
grep -i "get" practice_text/server_logs.txt
# Count the number of occurrences
grep -c "200" practice_text/server_logs.txt
```

**B. Using `find`:**
```bash
# Find all `.txt` files in the practice_fs directory
find practice_fs -name "*.txt"
# Find all files modified in the last 7 days
find practice_fs -mtime -7
# Find all directories named "config"
find practice_fs -type d -name "config"
# Find files and execute a command on them (find files and grep inside them)
find practice_text -name "*.csv" -exec grep "Alice" {} \;
```

**Practice Task 5:**
1.  Use `grep` to find all lines in `server_logs.txt` that resulted in a `404` error.
2.  Use `find` to locate all `.conf` files anywhere under the `/opt/linux_course` directory.
3.  (Challenge) Combine `find` and `grep`: Find all `.txt` files under `/opt/linux_course` that contain the word "the". (Hint: use `-exec` or `xargs`).

---

## **Homework Assignment**

**Instructions:** Complete the following tasks on the training server. Your work will be checked in your home directory under `~/homework_submission/`. Create a script file `~/homework_submission/solution.sh` that contains all the commands you used to complete the tasks. Also, create a `README.txt` explaining any assumptions.

**Tasks:**

1.  **User & Filesystem (15 points):**
    *   In your home directory, create a `homework_submission` directory.
    *   Inside it, create a directory structure that looks like this:
        ```
        homework_submission/
        ├── configs/
        │   └── (empty)
        ├── logs/
        │   └── system.log
        └── scripts/
            └── deploy.sh
        ```
    *   In the `system.log` file, add the following two lines:
        ```
        INFO: System started successfully.
        ERROR: Disk space low on /dev/sda1.
        ```

2.  **Permissions & Ownership (20 points):**
    *   Set the permissions on the `deploy.sh` script so that the owner can read, write, and execute it; the group can read and execute it; and others have no access. Use numeric notation.
    *   Set the permissions on the `configs` directory so that the owner has full access (rwx), the group can only list and read files inside it (r-x), and others have no access. Use numeric notation.
    *   Try to change the owner of the `logs` directory to `student2`. What happens? Note the error in your `README.txt`.

3.  **Text Processing with `sed` & `awk` (35 points):**
    *   The instructor has placed a file in `/opt/linux_course/homework_data.csv`. Inspect its structure.
    *   Use `sed` to create a new file in your submission dir called `clean_data.csv` where all occurrences of "NULL" are replaced with "0".
    *   Use `awk` to extract all lines from `clean_data.csv` where the "Score" is greater than 80. Save the output to `high_performers.txt`.
    *   Use `awk` to calculate the average "Score" from the `clean_data.csv` file and append this result to `high_performers.txt`.

4.  **File Search & Filtering (30 points):**
    *   Use `find` to locate all files with the `.sh` extension inside the `/opt/linux_course` directory. Save the list of absolute paths to a file `script_list.txt` in your submission dir.
    *   Use `grep` to search recursively in the `/opt/linux_course` directory for any file that contains the exact string `TODO`. Save the output (the lines containing `TODO`) to a file `todos.txt` in your submission dir.

**Submission:**
Your `homework_submission` directory should contain:
*   `solution.sh` (All commands you used)
*   `README.txt` (Any explanations, e.g., for Task 2c)
*   `clean_data.csv`
*   `high_performers.txt`
*   `script_list.txt`
*   `todos.txt`
*   The directory structure from Task 1.

Run `chmod -R 755 ~/homework_submission` so the instructor can check your work. Good luck

[Main](../README.md)
---