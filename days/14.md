[Main](../README.md)
---

## What are Tags?
Tags are metadata labels applied to tasks, roles, and plays that allow you to selectively run specific parts of your Ansible codebase. They provide fine-grained control over which components execute during playbook runs.

### Tag Execution Flow
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ All Tasks       │    │ Filter by       │    │ Only Tagged     │
│ in Playbook     │───▶│ Specified Tags  │───▶│ Tasks Execute   │
│                 │    │ --tags tag1,tag2│    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### Key Concepts

**Tag Inheritance**: Tags applied to roles, blocks, or imports are inherited by their children
**Special Tags**: `always`, `never` - control execution regardless of tag selection
**Tag Patterns**: Support for wildcards and multiple tag selection
**Skip Tags**: Exclude specific tags with `--skip-tags`


### Cheat Sheet

```yaml
# Basic tag application
- name: Install package
  package:
    name: nginx
    state: present
  tags: 
    - install
    - nginx

# Multiple tags on a task
- name: Configure service
  template:
    src: config.j2
    dest: /etc/service.conf
  tags:
    - config
    - service
    - deployment

# Role tagging
- hosts: webservers
  roles:
    - role: nginx
      tags: ['web', 'nginx']

# Block tagging (inherited by all tasks in block)
- block:
    - task1
    - task2
  tags: deployment

# Special tags
- name: Always run this task
  debug:
    msg: "This always runs"
  tags: always

```

**Testing Commands:**
```bash
# Run only setup tasks
ansible-playbook tags-practice.yml --tags "setup"

# Run everything EXCEPT cleanup
ansible-playbook tags-practice.yml --skip-tags "cleanup"

# Run with multiple specific tags
ansible-playbook tags-practice.yml --tags "setup,deploy"

# Run always-tagged tasks (plus any explicitly requested)
ansible-playbook tags-practice.yml --tags "test"  # Notice always task runs too
```

### Understanding Ansible Output Levels
Ansible provides multiple verbosity levels to control the amount of information displayed during playbook execution. This helps balance between detailed debugging and clean, readable output.

### Verbosity Levels
```
Level 0: Normal output (default)
Level 1: -v | Added information
Level 2: -vv | SSH connection details
Level 3: -vvv | Include internal ansible events
Level 4: -vvvv | Connection debugging
Level 5: -vvvvv | WinRM debugging
Level 6: -vvvvvv | Extra debugging
```
### Output Control Mechanisms

**Verbosity Flags**: `-v` to `-vvvvvv` for increasing detail
**No-Log**: Hide sensitive data from logs
**Quiet Mode**: Minimal output with `-q`

### Cheat Sheet

```bash
# Basic verbosity control
ansible-playbook playbook.yml           # Normal output
ansible-playbook playbook.yml -v        # Verbose
ansible-playbook playbook.yml -vv       # More verbose
ansible-playbook playbook.yml -vvv      # Debug level
ansible-playbook playbook.yml -q        # Quiet mode

# Output control in playbooks
- name: Task with controlled output
  debug:
    msg: "This will show in output"
  no_log: false  # Default

- name: Task with hidden output  
  debug:
    msg: "This won't show in output"
  no_log: true   # Hide task output

# Variable display control
- name: Show variable safely
  debug:
    msg: "Password is {{ secret_var }}"
  no_log: "{{ secret_var is defined }}"
```

### What are Dry Runs and Scope Limiting?
**Dry Run (`--check`)**: Executes a playbook in simulation mode without making actual changes to systems. It shows what would happen without performing the actions.

**Scope Limiting (`--limit`)**: Restricts playbook execution to specific hosts or groups from your inventory, allowing targeted operations.

### How Dry Run Works
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│ Normal Task     │    │ Dry Run Mode    │    │ Simulation      │
│ Execution       │───▶│ (--check)       │───▶│ Output Showing  │
│                 │    │                 │    │ What Would      │
│                 │    │                 │    │ Change          │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### Key Concepts

**Check Mode**: Simulates changes without applying them
**Diff Mode**: Shows detailed differences in files (`--diff`)
**Safe Modules**: Some modules work normally even in check mode
**Limiting Scope**: Target specific hosts, groups, or patterns
**Bastion Host Pattern**: Execute on hosts that match specific criteria

### Cheat Sheet

```bash
# Dry run operations
ansible-playbook playbook.yml --check              # Basic dry run
ansible-playbook playbook.yml --check --diff       # Dry run with diffs
ansible-playbook playbook.yml --check --limit web* # Dry run on specific hosts

# Scope limiting operations
ansible-playbook playbook.yml --limit web01        # Single host
ansible-playbook playbook.yml --limit webservers   # Host group
ansible-playbook playbook.yml --limit 'web*'       # Pattern matching
ansible-playbook playbook.yml --limit '!db*'       # Exclusion pattern

# Combined operations
ansible-playbook playbook.yml --check --limit web01 --diff
ansible-playbook playbook.yml --limit "web*:&production"  # Multiple patterns
```


[Main](../README.md)
---